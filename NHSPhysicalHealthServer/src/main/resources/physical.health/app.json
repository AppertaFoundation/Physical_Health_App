{
  "appName": "AppertaPhysicalHealth",
  "templates": ["Physical health app admin-v0",
    "Physical health app self monitoring-v0"],
  "params" : [
    {"setName": "PhysHealthSelf", "parameterName": "bp_time", "ehrName": "blood_pressure/history_origin"},
    {"setName": "PhysHealthSelf", "parameterName": "systolic", "ehrName": "blood_pressure/systolic|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "systolic_unit", "ehrName": "blood_pressure/systolic|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "diastolic", "ehrName": "blood_pressure/diastolic|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "diastolic_unit", "ehrName": "blood_pressure/diastolic|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "weight_time", "ehrName": "weight/history_origin"},
    {"setName": "PhysHealthSelf", "parameterName": "weight", "ehrName": "weight/weight|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "weight_unit", "ehrName": "weight/weight|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "height_time", "ehrName": "height/history_origin"},
    {"setName": "PhysHealthSelf", "parameterName": "height", "ehrName": "height/height|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "height_unit", "ehrName": "height/height|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "bmi_time", "ehrName": "body_mass_index/history_origin"},
    {"setName": "PhysHealthSelf", "parameterName": "bmi", "ehrName": "body_mass_index/body_mass_index|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "bmi_unit", "ehrName": "body_mass_index/body_mass_index|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "waist_time", "ehrName": "waist_circumference/history_origin"},
    {"setName": "PhysHealthSelf", "parameterName": "waist_circumference", "ehrName": "waist_circumference/waist_circumference|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "waist_circumference_unit", "ehrName": "waist_circumference/waist_circumference|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "qrisk_time", "ehrName": "qrisk2_2015_score/history_origin"},
    {"setName": "PhysHealthSelf", "parameterName": "qrisk_score", "ehrName": "qrisk2_2015_score/qrisk2_score|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "qrisk_unit", "ehrName": "qrisk2_2015_score/qrisk2_score|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "labtest", "ehrName": "physical_health_app_self_monitoring/laboratory_test_result"},
    {"setName": "PhysHealthSelf", "parameterName": "test_time", "ehrName": "history_origin"},
    {"setName": "PhysHealthSelf", "parameterName": "test_name", "ehrName": "test_name|value"},
    {"setName": "PhysHealthSelf", "parameterName": "test_code", "ehrName": "test_name|code"},
    {"setName": "PhysHealthSelf", "parameterName": "test_terminology", "ehrName": "test_name|terminology"},
    {"setName": "PhysHealthSelf", "parameterName": "result_name", "ehrName": "laboratory_analyte_result:0/analyte_name|value"},
    {"setName": "PhysHealthSelf", "parameterName": "result_code", "ehrName": "laboratory_analyte_result:0/analyte_name|code"},
    {"setName": "PhysHealthSelf", "parameterName": "result_terminology", "ehrName": "laboratory_analyte_result:0/analyte_name|terminology"},
    {"setName": "PhysHealthSelf", "parameterName": "result_value", "ehrName": "laboratory_analyte_result:0/analyte_result|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "result_unit", "ehrName": "laboratory_analyte_result:0/analyte_result|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "result_range_low", "ehrName": "laboratory_analyte_result:0/analyte_result/_normal_range/lower|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "result_range_low_unit", "ehrName": "laboratory_analyte_result:0/analyte_result/_normal_range/lower|unit"},
    {"setName": "PhysHealthSelf", "parameterName": "result_range_high", "ehrName": "laboratory_analyte_result:0/analyte_result/_normal_range/upper|magnitude"},
    {"setName": "PhysHealthSelf", "parameterName": "result_range_high_unit", "ehrName": "laboratory_analyte_result:0/analyte_result/_normal_range/upper|unit"}
  ],
  "queries" : [
    {"name" : "PhysHealthBloodPressure", "template" :  "select e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, b_a/data[at0001]/events[at0006]/time/value as time, b_a/data[at0001]/events[at0006]/data[at0003]/items[at0004]/value/magnitude as systolic, b_a/data[at0001]/events[at0006]/data[at0003]/items[at0004]/value/units as systolic_units,b_a/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/magnitude as diastolic, b_a/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/units as diastolic_units FROM EHR e contains COMPOSITION a contains OBSERVATION b_a[openEHR-EHR-OBSERVATION.blood_pressure.v1]"},
    {"name" : "PhysHealthBodyMeasurements", "template" : "select e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_a/data[at0002]/origin/value as weight_time, a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as weight, a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/units as weight_unit, a_b/data[at0001]/origin/value as height_time, a_b/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as height, a_b/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/units as height_unit, a_c/data[at0001]/origin/value as bmi_time, a_c/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as bmi, a_c/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/units as bmi_unit, a_d/data[at0001]/origin/value as waist_circumference_time, a_d/data[at0001]/events[at0010]/data[at0003]/items[at0004]/value/magnitude as waist_circumference, a_d/data[at0001]/events[at0010]/data[at0003]/items[at0004]/value/units as waist_circumference_unit, a_f/data[at0001]/origin/value as qrisk_time, a_f/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as qrisk, a_f/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/units as qrisk_unit from EHR e contains COMPOSITION a contains (OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_weight.v2] or OBSERVATION a_b[openEHR-EHR-OBSERVATION.height.v1] or OBSERVATION a_c[openEHR-EHR-OBSERVATION.body_mass_index.v2] or OBSERVATION a_d[openEHR-EHR-OBSERVATION.waist_circumference.v1] or OBSERVATION a_f[openEHR-EHR-OBSERVATION.qrisk2_2015_score.v0])"},
    {"name" : "PhysHealthLabResultsByCode", "template" :  "select e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_a/data[at0001]/origin/value as result_time, a_b/items[at0024]/value/value as result_name, a_b/items[at0024]/value/defining_code/code_string as result_code, a_b/items[at0001]/value/magnitude as result, a_b/items[at0001]/value/units as result_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_a[openEHR-EHR-OBSERVATION.laboratory_test_result.v1] contains CLUSTER a_b[openEHR-EHR-CLUSTER.laboratory_test_analyte.v0]) where a_b/items[at0024]/value/defining_code/code_string='{{lab_code}}'"},
    {"name" : "PhysHealthLabResultsByName", "template" :  "select e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_a/data[at0001]/origin/value as result_time, a_b/items[at0024]/value/value as result_name, a_b/items[at0024]/value/defining_code/code_string as result_code, a_b/items[at0001]/value/magnitude as result, a_b/items[at0001]/value/units as result_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_a[openEHR-EHR-OBSERVATION.laboratory_test_result.v1] contains CLUSTER a_b[openEHR-EHR-CLUSTER.laboratory_test_analyte.v0]) where a_b/items[at0024]/value/value='{{lab_name}}'"},
    {"name" : "PhysHealthLatestBloodPressure", "template" : "select top 2 e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, b_a/data[at0001]/events[at0006]/time/value as time, b_a/data[at0001]/events[at0006]/data[at0003]/items[at0004]/value/magnitude as systolic, b_a/data[at0001]/events[at0006]/data[at0003]/items[at0004]/value/units as systolic_units, b_a/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/magnitude as diastolic, b_a/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/units as diastolic_units from EHR e contains COMPOSITION a contains OBSERVATION b_a[openEHR-EHR-OBSERVATION.blood_pressure.v1] order by b_a/data[at0001]/events[at0006]/time/value desc"},
    {"name" : "PhysHealthLatestWeight", "template" : "select top 2 e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_a/data[at0002]/origin/value as weight_time, a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as weight, a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/units as weight_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_weight.v2] ) order by a_a/data[at0002]/origin/value desc"},
    {"name" : "PhysHealthLatestHeight", "template" :  "select top 2 e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_b/data[at0001]/origin/value as height_time, a_b/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as height, a_b/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/units as height_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_b[openEHR-EHR-OBSERVATION.height.v1]) order by a_b/data[at0001]/origin/value desc"},
    {"name" : "PhysHealthLatestBmi", "template" : "select top 2 e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_c/data[at0001]/origin/value as bmi_time, a_c/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as bmi, a_c/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/units as bmi_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_c[openEHR-EHR-OBSERVATION.body_mass_index.v2]) order by a_c/data[at0001]/origin/value desc"},
    {"name" : "PhysHealthLatestWaist", "template" : "select top 2 e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_d/data[at0001]/origin/value as waist_circumference_time, a_d/data[at0001]/events[at0010]/data[at0003]/items[at0004]/value/magnitude as waist_circumference, a_d/data[at0001]/events[at0010]/data[at0003]/items[at0004]/value/units as waist_circumference_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_d[openEHR-EHR-OBSERVATION.waist_circumference.v1]) order by a_d/data[at0001]/origin/value desc"},
    {"name" : "PhysHealthLatestQrisk", "template" : "select top 2 e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_f/data[at0001]/origin/value as qrisk_time, a_f/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as qrisk, a_f/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/units as qrisk_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_f[openEHR-EHR-OBSERVATION.qrisk2_2015_score.v0]) order by a_f/data[at0001]/origin/value desc"},
    {"name" : "PhysHealthLatestLabByName", "template" : "select top 2 e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_a/data[at0001]/origin/value as result_time, a_b/items[at0024]/value/value as result_name, a_b/items[at0024]/value/defining_code/code_string as result_code, a_b/items[at0001]/value/magnitude as result, a_b/items[at0001]/value/units as result_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_a[openEHR-EHR-OBSERVATION.laboratory_test_result.v1] contains CLUSTER a_b[openEHR-EHR-CLUSTER.laboratory_test_analyte.v0]) where a_b/items[at0024]/value/value='{{lab_name}}' order by a_a/data[at0001]/origin/value desc"},
    {"name" : "PhysHealthLatestLabByCode", "template" : "select top 2 e/ehr_id/value as ehrId, a/uid/value as compositionId, a/composer/name as composerName, a_a/data[at0001]/origin/value as result_time, a_b/items[at0024]/value/value as result_name, a_b/items[at0024]/value/defining_code/code_string as result_code, a_b/items[at0001]/value/magnitude as result, a_b/items[at0001]/value/units as result_unit from EHR e contains COMPOSITION a contains ( OBSERVATION a_a[openEHR-EHR-OBSERVATION.laboratory_test_result.v1] contains CLUSTER a_b[openEHR-EHR-CLUSTER.laboratory_test_analyte.v0]) where a_b/items[at0024]/value/defining_code/code_string='{{lab_code}}' order by a_a/data[at0001]/origin/value desc"}
  ]

}